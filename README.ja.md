git-subtree-tools
====

Git のサブツリー機能を使いやすくするための補助スクリプト群です。

## install

```
./install.sh
```

install to _/usr/local/bin/setup-gitstt_ .

## setup

このツールでは、サブツリー操作用のスクリプトを Git リポジトリごとに生成します。

まずは初期化済み Git リポジトリのルートに移動してから、上記でインストールしたセットアップ用のスクリプトを実行してください。

```
cd GIT_PROJECT_ROOT
setup-gitstt
```

生成されたスクリプトには、サブツリー用に生成されたディレクトリから Git リポジトリのルートへの相対パス等、固有の情報が含まれます。

### Options

#### -d

サブツリー機能で使用するディレクトリの相対パスです。このディレクトリの下にツール群とサブツリーのデータが配備されます。

標準値は _subtree_ です。

#### -f

セットアップ時に同名のスクリプトが既に存在する場合、強制的に上書きします。

#### -r

このツールでは、全てのサブツリーをリモートリポジトリに登録して管理します。その際に使用する接頭辞です。

標準値は _subtree\__ です。

#### -t

セットアップをおこなうツールのタイプです。選択したもののみがセットアップされます。 all, add, pull, push を認識します。

標準値は all です。

## add.sh

Git リポジトリにサブツリーを登録します。

```
./subtree/add.sh [Options] [NAME] [REMOTE_PATH] [BRANCH]
```

NAME は管理時に使用するサブツリーの名前です。これが保存時のディレクトリ名になり、リモートリポジトリの接尾辞になります。

REMOTE_PATH は取り込むサブツリーのパスです。

BRANCH は取り込むサブツリーのブランチ名です。この引数のみ必須ではありません。省略時は _master_ が設定されます。

### Options

#### -s

設定時、 _--squash_ オプションを無効化します。

標準では _--squash_ は有効化されていることに注意してください。

## pull.sh

サブツリーのプルをおこないます。

```
./subtree/pull.sh [Options] [NAME] [BRANCH]
```

NAME は `add.sh` で設定した、このツールで管理するサブツリーの名前です。取り込んだディレクトリの名前と同じです。省略時は、存在するサブツリー全てからプルをおこないます。

BRANCH はプルをおこなうサブツリーのブランチ名です。省略時は _master_ が設定されます。

### Options

#### -s

設定時、 _--squash_ オプションを無効化します。

標準では _--squash_ は有効化されていることに注意してください。

## push.sh

サブツリーの内容をプッシュします。

通常のサブツリーのプッシュと同様、事前に更新内容をコミットしておく必要があります。

```
./subtree/push.sh [Options] [NAME] [BRANCH]
```

NAME は `add.sh` で設定した、このツールで管理するサブツリーの名前です。取り込んだディレクトリの名前と同じです。

BRANCH はプッシュをおこなうサブツリーのブランチ名です。

誤動作を防ぐため、全ての引数は必須となっています。

### Options

#### -s

設定時、 _--squash_ オプションを無効化します。

標準では _--squash_ は有効化されていることに注意してください。

## AUTHOR

[indeep-xyz](http://indeep.xyz/)
